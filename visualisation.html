

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Visualisation &mdash; py_trees 0.5.8 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="py_trees 0.5.8 documentation" href="index.html"/>
        <link rel="next" title="Surviving the Crazy Hospital" href="the_crazy_hospital.html"/>
        <link rel="prev" title="Trees" href="trees.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> py_trees
          

          
          </a>

          
            
            
              <div class="version">
                0.5.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
                <p class="caption"><span class="caption-text">Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="behaviours.html">Behaviours</a></li>
<li class="toctree-l1"><a class="reference internal" href="composites.html">Composites</a></li>
<li class="toctree-l1"><a class="reference internal" href="blackboards.html">Blackboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="trees.html">Trees</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Visualisation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ascii-trees">Ascii Trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ascii-trees-runtime">Ascii Trees (Runtime)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#render-to-file-dot-svg-png">Render to File (Dot/SVG/PNG)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="the_crazy_hospital.html">Surviving the Crazy Hospital</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demos.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="programs.html">Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Module API</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
    <a href="genindex.html">Index</a>
    <a href="py-modindex.html">Module Index</a>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">py_trees</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Visualisation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/visualisation.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="visualisation">
<h1>Visualisation<a class="headerlink" href="#visualisation" title="Permalink to this headline">¶</a></h1>
<p>Behaviour trees are significantly easier to design, monitor and debug
with visualisations. Py Trees does provide minimal assistance to render
trees to various simple output formats. Currently this includes dot graphs,
strings or stdout.</p>
<div class="section" id="ascii-trees">
<h2>Ascii Trees<a class="headerlink" href="#ascii-trees" title="Permalink to this headline">¶</a></h2>
<p>You can get a very simple ascii representation of the tree on stdout with <a class="reference internal" href="modules.html#py_trees.display.print_ascii_tree" title="py_trees.display.print_ascii_tree"><code class="xref py py-func docutils literal"><span class="pre">print_ascii_tree()</span></code></a>:</p>
<dl class="function">
<dt>
<code class="descclassname">py_trees.display.</code><code class="descname">print_ascii_tree</code><span class="sig-paren">(</span><em>root</em>, <em>indent=0</em>, <em>show_status=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py_trees/display.html#print_ascii_tree"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Print the ASCII representation of an entire behaviour tree.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>root</strong> (<a class="reference internal" href="modules.html#py_trees.behaviour.Behaviour" title="py_trees.behaviour.Behaviour"><code class="xref py py-class docutils literal"><span class="pre">Behaviour</span></code></a>) &#8211; the root of the tree, or subtree you want to show</li>
<li><strong>indent</strong> (<code class="xref py py-obj docutils literal"><span class="pre">int</span></code>) &#8211; the number of characters to indent the tree</li>
<li><strong>show_status</strong> (<code class="xref py py-obj docutils literal"><span class="pre">bool</span></code>) &#8211; additionally show feedback message and status of every element</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Render a simple tree in ascii format to stdout.</p>
<a class="reference internal image-reference" href="_images/ascii_tree_simple.png"><img alt="_images/ascii_tree_simple.png" class="align-right" src="_images/ascii_tree_simple.png" style="width: 100px;" /></a>
<div class="highlight-python"><div class="highlight"><pre><span class="n">root</span> <span class="o">=</span> <span class="n">py_trees</span><span class="o">.</span><span class="n">composites</span><span class="o">.</span><span class="n">Sequence</span><span class="p">(</span><span class="s2">&quot;Sequence&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Action 1&quot;</span><span class="p">,</span> <span class="s2">&quot;Action 2&quot;</span><span class="p">,</span> <span class="s2">&quot;Action 3&quot;</span><span class="p">]:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">py_trees</span><span class="o">.</span><span class="n">behaviours</span><span class="o">.</span><span class="n">Count</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
            <span class="n">fail_until</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">running_until</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">success_until</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">py_trees</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">print_ascii_tree</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">To additionally display status and feedbback message from every behaviour in the tree,
simply set the <code class="xref py py-obj docutils literal"><span class="pre">show_status</span></code> flag to True.</p>
</div>
</dd></dl>

</div>
<div class="section" id="ascii-trees-runtime">
<h2>Ascii Trees (Runtime)<a class="headerlink" href="#ascii-trees-runtime" title="Permalink to this headline">¶</a></h2>
<p>When a tree is ticking, it is important to be able to catch the status and feedback message from each behaviour that
has been traversed. You can do this by using the <a class="reference internal" href="modules.html#py_trees.visitors.SnapshotVisitor" title="py_trees.visitors.SnapshotVisitor"><code class="xref py py-class docutils literal"><span class="pre">SnapshotVisitor</span></code></a> in conjunction
with the <a class="reference internal" href="modules.html#py_trees.display.ascii_tree" title="py_trees.display.ascii_tree"><code class="xref py py-func docutils literal"><span class="pre">ascii_tree()</span></code></a> function:</p>
<dl class="function">
<dt>
<code class="descclassname">py_trees.display.</code><code class="descname">ascii_tree</code><span class="sig-paren">(</span><em>tree</em>, <em>indent=0</em>, <em>snapshot_information=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py_trees/display.html#ascii_tree"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Build an ascii tree representation as a string for redirecting
to elsewhere other than stdout. This can be the entire tree, or
a recorded snapshot of the tree (i.e. just the part that was traversed).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tree</strong> (<a class="reference internal" href="modules.html#py_trees.behaviour.Behaviour" title="py_trees.behaviour.Behaviour"><code class="xref py py-class docutils literal"><span class="pre">Behaviour</span></code></a>) &#8211; the root of the tree, or subtree you want to show</li>
<li><strong>indent</strong> (<code class="xref py py-obj docutils literal"><span class="pre">int</span></code>) &#8211; the number of characters to indent the tree</li>
<li><strong>snapshot_information</strong> (<a class="reference internal" href="modules.html#module-py_trees.visitors" title="py_trees.visitors: entities that visit behaviours as a tree is traversed"><code class="xref py py-mod docutils literal"><span class="pre">visitors</span></code></a>) &#8211; a visitor that recorded information about a traversed tree (e.g. <a class="reference internal" href="modules.html#py_trees.visitors.SnapshotVisitor" title="py_trees.visitors.SnapshotVisitor"><code class="xref py py-class docutils literal"><span class="pre">SnapshotVisitor</span></code></a>)</li>
<li><strong>snapshot_information</strong> &#8211; a visitor that recorded information about a traversed tree (e.g. <a class="reference internal" href="modules.html#py_trees.visitors.SnapshotVisitor" title="py_trees.visitors.SnapshotVisitor"><code class="xref py py-class docutils literal"><span class="pre">SnapshotVisitor</span></code></a>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">an ascii tree (i.e. in string form)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Use the <a class="reference internal" href="modules.html#py_trees.visitors.SnapshotVisitor" title="py_trees.visitors.SnapshotVisitor"><code class="xref py py-class docutils literal"><span class="pre">SnapshotVisitor</span></code></a>
and <a class="reference internal" href="modules.html#py_trees.trees.BehaviourTree" title="py_trees.trees.BehaviourTree"><code class="xref py py-class docutils literal"><span class="pre">BehaviourTree</span></code></a>
to generate snapshot information at each tick and feed that to
a post tick handler that will print the traversed ascii tree
complete with status and feedback messages.</p>
<a class="reference internal image-reference" href="_images/ascii_tree.png"><img alt="_images/ascii_tree.png" class="align-right" src="_images/ascii_tree.png" style="width: 200px;" /></a>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">post_tick_handler</span><span class="p">(</span><span class="n">snapshot_visitor</span><span class="p">,</span> <span class="n">behaviour_tree</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">py_trees</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">ascii_tree</span><span class="p">(</span><span class="n">behaviour_tree</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
          <span class="n">snapshot_information</span><span class="o">=</span><span class="n">snapshot_visitor</span><span class="p">))</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">py_trees</span><span class="o">.</span><span class="n">composites</span><span class="o">.</span><span class="n">Sequence</span><span class="p">(</span><span class="s2">&quot;Sequence&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Action 1&quot;</span><span class="p">,</span> <span class="s2">&quot;Action 2&quot;</span><span class="p">,</span> <span class="s2">&quot;Action 3&quot;</span><span class="p">]:</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">py_trees</span><span class="o">.</span><span class="n">behaviours</span><span class="o">.</span><span class="n">Count</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
            <span class="n">fail_until</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">running_until</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">success_until</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">root</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">behaviour_tree</span> <span class="o">=</span> <span class="n">py_trees</span><span class="o">.</span><span class="n">trees</span><span class="o">.</span><span class="n">BehaviourTree</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">snapshot_visitor</span> <span class="o">=</span> <span class="n">py_trees</span><span class="o">.</span><span class="n">visitors</span><span class="o">.</span><span class="n">SnapshotVisitor</span><span class="p">()</span>
<span class="n">behaviour_tree</span><span class="o">.</span><span class="n">add_post_tick_handler</span><span class="p">(</span>
    <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">post_tick_handler</span><span class="p">,</span>
                      <span class="n">snapshot_visitor</span><span class="p">))</span>
<span class="n">behaviour_tree</span><span class="o">.</span><span class="n">visitors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">snapshot_visitor</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="render-to-file-dot-svg-png">
<h2>Render to File (Dot/SVG/PNG)<a class="headerlink" href="#render-to-file-dot-svg-png" title="Permalink to this headline">¶</a></h2>
<p><strong>API</strong></p>
<p>You can render trees into dot/png/svg files simply by calling the <a class="reference internal" href="modules.html#py_trees.display.render_dot_tree" title="py_trees.display.render_dot_tree"><code class="xref py py-func docutils literal"><span class="pre">render_dot_tree()</span></code></a>
function.</p>
<p>Should you wish to capture the dot graph result directly (as a dot graph object), use the
<a class="reference internal" href="modules.html#py_trees.display.generate_pydot_graph" title="py_trees.display.generate_pydot_graph"><code class="xref py py-func docutils literal"><span class="pre">generate_pydot_graph()</span></code></a> method.</p>
<p><strong>Command Line Utility</strong></p>
<p>You can also render any exposed method in your python packages that creates
a tree and returns the root of the tree from the command line using the <a class="reference internal" href="programs.html#py-trees-render"><span>py-trees-render</span></a> program.</p>
<p><strong>Blackboxes and Visibility Levels</strong></p>
<p>There is also an experimental feature that allows you to flag behaviours as blackboxes with multiple levels
of granularity. This is purely for the purposes of showing different levels of detail in rendered dot graphs.
A fullly rendered dot graph with hundreds of behaviours is not of much use when wanting to visualise the
big picture.</p>
<p>The <a class="reference internal" href="demos.html#py-trees-demo-dot-graphs-program"><span>py-trees-demo-dot-graphs</span></a> program serves as a self-contained example of this feature.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="the_crazy_hospital.html" class="btn btn-neutral float-right" title="Surviving the Crazy Hospital" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="trees.html" class="btn btn-neutral" title="Trees" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.8',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>